<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üõ† WoofWorks Dashboard</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #121212;
  color: #e0e0e0;
  margin: 0;
  padding: 0;
}

header {
  background: #00eeff;
  color: #121212;
  text-align: center;
  padding: 1rem;
}

main {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  padding: 2rem;
  gap: 1.5rem;
}

.card {
  background: #1f1f1f;
  border-radius: 15px;
  padding: 1.5rem;
  width: 300px;
  text-align: center;
  box-shadow: 0 0 15px #00eeff55;
  transition: transform 0.2s;
}

.card:hover { transform: scale(1.05); }

footer {
  text-align: center;
  padding: 1rem;
  background: #1f1f1f;
  color: #888;
}

ul { list-style: none; padding: 0; }
li { margin: 0.5rem 0; }

input, button { padding: 0.5rem; border-radius: 5px; border: none; margin-top: 0.5rem; }
button { background: #00eeff; color: #121212; cursor: pointer; }
button:hover { background: #00cccc; }

#timer-input { width: 60px; text-align: center; }
</style>
</head>
<body>

<header>
  <h1>üõ† WoofWorks Dashboard</h1>
</header>

<main>
  <!-- DATE & TIME -->
  <section class="card">
    <h2>üìÖ Perth Time</h2>
    <p id="perth-date"></p>
    <p id="perth-time"></p>
  </section>

  <!-- GITHUB VISITS -->
  <section class="card">
    <h2>üåê GitHub Visits</h2>
    <p id="visits">Loading...</p>
  </section>

  <!-- TODO LIST -->
  <section class="card">
    <h2>üìù To-Do List</h2>
    <ul id="todo-list"></ul>
  </section>

  <!-- TIMER -->
  <section class="card">
    <h2>‚è± Timer</h2>
    <p id="timer-display">00:00:00</p>
    <div>
      <input type="number" id="timer-input" placeholder="min" min="1">
      <button onclick="startTimer()">Start</button>
    </div>
  </section>
</main>

<footer>
  <p>¬© 2025 WoofWorks Inc.</p>
</footer>

<script>
// ----- PERTH DATE & TIME -----
function updatePerthTime() {
    const now = new Date();
    const optionsDate = { weekday: 'long', year: 'numeric', month: 'numeric', day: 'numeric', timeZone: 'Australia/Perth' };
    const optionsTime = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true, timeZone: 'Australia/Perth' };

    document.getElementById('perth-date').innerText = now.toLocaleDateString('en-GB', optionsDate);
    document.getElementById('perth-time').innerText = `‚è∞ Time: ${now.toLocaleTimeString('en-GB', optionsTime)}`;
}
updatePerthTime();
setInterval(updatePerthTime, 1000);

// ----- GITHUB VISITS -----
async function updateVisits() {
    const repoOwner = 'FunnyTom777';
    const repoName = 'FunnyTom777.github.io';
    try {
        const response = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/traffic/views`);
        if (!response.ok) throw new Error('Cannot fetch visits');
        const data = await response.json();
        document.getElementById('visits').innerText = `üëÅÔ∏è Total Views (last 14 days): ${data.count}`;
    } catch (err) {
        document.getElementById('visits').innerText = '‚ö†Ô∏è Visits not available';
        console.error(err);
    }
}
updateVisits();

// ----- TODO LIST FROM TODO.MD -----
async function loadTodo() {
    try {
        const response = await fetch('todo.md'); // file in repo root
        if (!response.ok) throw new Error('todo.md not found');
        const text = await response.text();
        const lines = text.split('\n').filter(line => line.trim() !== '');
        const listEl = document.getElementById('todo-list');
        listEl.innerHTML = '';
        lines.forEach(line => {
            const li = document.createElement('li');
            li.textContent = line.replace(/^[-*]\s*/, ''); // remove markdown bullet
            listEl.appendChild(li);
        });
    } catch (err) {
        console.error(err);
        document.getElementById('todo-list').innerHTML = '<li>‚ö†Ô∏è Cannot load todo.md</li>';
    }
}
loadTodo();

// ----- TIMER -----
let timerInterval;
function startTimer() {
    clearInterval(timerInterval);
    const minutes = parseInt(document.getElementById('timer-input').value);
    if (isNaN(minutes) || minutes <= 0) return;
    let remaining = minutes * 60;
    const display = document.getElementById('timer-display');
    const alarm = new Audio('https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg'); // online sound
    timerInterval = setInterval(() => {
        const hrs = Math.floor(remaining / 3600);
        const mins = Math.floor((remaining % 3600) / 60);
        const secs = remaining % 60;
        display.textContent = `${hrs.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
        remaining--;
        if (remaining < 0) {
            clearInterval(timerInterval);
            display.textContent = '‚è∞ Time\'s up!';
            alarm.play();
        }
    }, 1000);
}
</script>

</body>
</html>
